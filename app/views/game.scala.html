@(user: models.users.User, game: models.Game, e: play.api.Environment)

@main(game.getTitle + " on OneUp", user) {
    <div class="card">
        <div class="card-header">
            <h1>@game.getTitle</h1>
        </div>
        <div class="card-body">
            @for(media <- game.getMedia) {
                @if(media.getMime.contains("image")) {
                    @if(e.resource("public/" + media.getLink).isDefined) {
                        <img id="gameImg" src="@routes.Assets.versioned(media.getLink)"/>
                    }
                }
                @if(media.getMime.equals("video/youtube")) {
                    <iframe width="560" height="315" src="@media.getLink" frameborder="0" allow="encrypted-media" allowfullscreen></iframe>
                }
            }
            <h4>@game.getDescription</h4>
            @if(user != null) {
                @if(user.getGamesList.contains(game)) {
                    <a class="btn btn-outline-success" href="@routes.HomeController.download(game.getId)">Download Game</a>
                } else {
                    @if(game.getDiscount > 0.0) {
                        <span class="badge badge-success">-@{game.getDiscount * 100}%</span>
                        <del><h4>€@game.getPrice</h4></del>
                        <h4>€@game.getDiscountedPrice</h4>
                    } else {
                        <h4>€@game.getPrice</h4>
                    }
                    <a class="btn btn-success" href="#">Add To Cart</a>

                }
            } else {
                @if(game.getDiscount > 0.0) {
                    <span class="badge badge-success">-@{game.getDiscount * 100}%</span>
                    <del><h4>€@game.getPrice</h4></del>
                    <h4>€@game.getDiscountedPrice</h4>
                } else {
                    <h4>€@game.getPrice</h4>
                }
                <a class="btn btn-outline-success" href="@routes.LoginController.loginRef(request.uri)">Login to buy</a>
            }
        </div>
    </div>



}